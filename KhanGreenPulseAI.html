<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GreenPulseAI ‚Äî –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–µ–¥</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap');
    body { font-family: 'Montserrat', sans-serif; }
    input[type=range]::-webkit-slider-thumb { background: red; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn { animation: fadeIn 0.5s ease-out forwards; }
  </style>
  <style>
  /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Ç–æ–ø–ª–∏–≤–∞ */
  #fuel {
    background-color: #111827; /* –¢—ë–º–Ω—ã–π —Ñ–æ–Ω */
    color: white;              /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
    border: 1px solid #374151; /* –¢–æ–Ω–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
    appearance: none;
    background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='16' viewBox='0 0 24 24' width='16' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    padding-right: 2.5rem;
  }

  /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
  :not(.dark) #fuel {
    background-color: white;
    color: black;
    border: 1px solid #ccc;
    background-image: url("data:image/svg+xml;utf8,<svg fill='black' height='16' viewBox='0 0 24 24' width='16' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  }
</style>

</head>
<body class="bg-gray-100 dark:bg-gray-900 text-black dark:text-white transition-colors duration-300 p-6">
  <div class="max-w-xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg animate-fadeIn">
    <!-- Theme & Language -->
    <div class="flex justify-end space-x-2 mb-4">
      <select id="language" class="p-1 border rounded text-sm bg-gray-100 dark:bg-gray-700">
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        <option value="en">English</option>
        <option value="it">Italiano</option>
        <option value="zh">ÁÆÄ‰Ωì‰∏≠Êñá</option>

      </select>
      <button id="theme-toggle" class="p-1 rounded bg-gray-200 dark:bg-gray-600">üåì</button>
    </div>

    <!-- Title -->
    <h1 id="title" class="text-2xl font-bold mb-4 text-center"></h1>

    <!-- Sliders -->
    <label id="label-electricity" class="block mb-2"></label>
    <input id="electricity" type="range" min="0" max="500" step="10" value="300" class="w-full mb-4" />

    <label id="label-meat" class="block mb-2"></label>
    <input id="meat" type="range" min="0" max="1000" step="10" value="200" class="w-full mb-4" />

    <label id="label-plastic" class="block mb-2"></label>
    <input id="plastic" type="range" min="0" max="40" step="1" value="10" class="w-full mb-4" />

    <label id="label-transport" class="block mb-2"></label>
    <input id="transport" type="range" min="0" max="8000" step="10" value="100" class="w-full mb-4" />

    <!-- Fuel type -->
    <label id="label-fuel" class="block mb-2"></label>
    <select id="fuel" class="w-full mb-4 p-2 border rounded-xl"></select>

    <!-- Calculate button -->
    <button id="submit-btn" class="w-full py-2 rounded bg-green-600 hover:bg-green-700 dark:bg-green-400 dark:hover:bg-green-500 text-white dark:text-black font-semibold transition-transform duration-200 hover:scale-105 mb-4"></button>

    <!-- Output and recommendation -->
    <p id="output" class="text-center font-semibold text-lg"></p>
    <p id="recommendation" class="text-center mt-2 text-base"></p>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const root = document.documentElement;
    // Theme
    if (localStorage.getItem('darkMode') === 'true') root.classList.add('dark');
    document.getElementById('theme-toggle').addEventListener('click', () => {
      const dark = root.classList.toggle('dark');
      localStorage.setItem('darkMode', dark);
    });
    // Translations
    const translations = {
    
      ru: {
        title: "üåø GreenPulseAI ‚Äî –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–µ–¥",
        electricity: "–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è (–∫–í—Ç/–º–µ—Å):",
        meat: "–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –º—è—Å–∞ (–≥—Ä–∞–º–º –≤ –¥–µ–Ω—å):",
        plastic: "–ü–ª–∞—Å—Ç–∏–∫–æ–≤–∞—è —É–ø–∞–∫–æ–≤–∫–∞ (—à—Ç –≤ –Ω–µ–¥–µ–ª—é):",
        transport: "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (–∫–º –≤ –Ω–µ–¥–µ–ª—é):",
        fuel: "–¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞:",
        button: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å",
        result: "–í–∞—à –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–µ–¥:",
        unit: "–∫–≥ CO‚ÇÇ –≤ –º–µ—Å—è—Ü",
        recommendations: {
          low: "–û—Ç–ª–∏—á–Ω–æ! –í–∞—à —Å–ª–µ–¥ –Ω–∏–∑–∫–∏–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ –∏ –ø–æ–¥—É–º–∞–π—Ç–µ –æ –º–µ—Ä–∞—Ö.",
          moderate: "–£–º–µ—Ä–µ–Ω–Ω—ã–π —Å–ª–µ–¥. –ß—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å, —É–º–µ–Ω—å—à–∞–π—Ç–µ –º—è—Å–æ –∏ —á–∞—â–µ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º.",
          high: "–í—ã—Å–æ–∫–∏–π —Å–ª–µ–¥. –°–æ–∫—Ä–∞—Ç–∏—Ç–µ –ø–æ–µ–∑–¥–∫–∏ –Ω–∞ –∞–≤—Ç–æ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ —ç–Ω–µ—Ä–≥–æ–∏—Å—Ç–æ—á–Ω–∏–∫–∏.",
          veryHigh: "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π! –°—Ä–æ—á–Ω–æ –¥–µ–π—Å—Ç–≤—É–π—Ç–µ: –≤–µ–ª–æ –∏–ª–∏ —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—å, –º–∏–Ω–∏–º—É–º –º—è—Å–∞ –∏ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏."
        },
        fuelOptions: [
          { value: 'petrol', label: '–ë–µ–Ω–∑–∏–Ω' },
          { value: 'diesel', label: '–î–∏–∑–µ–ª—å' },
          { value: 'electric', label: '–≠–ª–µ–∫—Ç—Ä–æ' }
        ]
      },
      en: {
        title: "üåø GreenPulseAI ‚Äî Personal Carbon Footprint",
        electricity: "Electricity (kWh/month):",
        meat: "Meat consumption (grams per day):",
        plastic: "Plastic packages (per week):",
        transport: "Transport (km per week):",
        fuel: "Fuel type:",
        button: "Calculate",
        result: "Your carbon footprint:",
        unit: "kg CO‚ÇÇ per month",
        recommendations: {
          low: "Great! Your footprint is low. Keep it up and consider energy-efficient appliances.",
          moderate: "Moderate footprint. To reduce it, cut down on meat and use public transport more.",
          high: "High footprint. We recommend reducing car travel, switching to renewables, and using reusable bags.",
          veryHigh: "Very high! Act now: bike or use an electric vehicle, and minimize meat & electricity usage."
        },
        fuelOptions: [
          { value: 'petrol', label: 'Petrol' },
          { value: 'diesel', label: 'Diesel' },
          { value: 'electric', label: 'Electric' }
        ]
      },
      it: {
        title: "üåø GreenPulseAI ‚Äî Impronta di carbonio personale",
        electricity: "Elettricit√† (kWh/mese):",
        meat: "Consumo di carne (grammi al giorno):",
        plastic: "Imballaggi di plastica (a settimana):",
        transport: "Trasporto (km a settimana):",
        fuel: "Tipo di carburante:",
        button: "Calcola",
        result: "La tua impronta di carbonio:",
        unit: "kg CO‚ÇÇ al mese",
        recommendations: {
          low: "Ottimo! Impronta bassa. Continua cos√¨ e scegli elettrodomestici a basso consumo.",
          moderate: "Impronta moderata. Per ridurla, limita il consumo di carne e usa i mezzi pubblici pi√π spesso.",
          high: "Impronta elevata. Riduci i viaggi in auto, passa a fonti rinnovabili e usa borse riutilizzabili.",
          veryHigh: "Impronta molto alta! Agisci subito: usa bici o veicolo elettrico e minimizza carne ed energia."
        },
        fuelOptions: [
          { value: 'petrol', label: 'Benzina' },
          { value: 'diesel', label: 'Diesel' },
          { value: 'electric', label: 'Elettrico' }
        ]
      },zh: {
  title: "üåø GreenPulseAI ‚Äî ‰∏™‰∫∫Á¢≥Ë∂≥Ëøπ",
  electricity: "ÁîµÂäõÊ∂àËÄó (ÂçÉÁì¶Êó∂/Êúà):",
  meat: "ËÇâÁ±ªÊ∂àËÄó (ÂÖã/Â§©):",
  plastic: "Â°ëÊñôÂåÖË£Ö (ÊØèÂë®):",
  transport: "‰∫§ÈÄö (ÂÖ¨Èáå/ÊØèÂë®):",
  fuel: "ÁáÉÊñôÁ±ªÂûã:",
  button: "ËÆ°ÁÆó",
  result: "ÊÇ®ÁöÑÁ¢≥Ë∂≥Ëøπ:",
  unit: "ÂÖ¨Êñ§‰∫åÊ∞ßÂåñÁ¢≥/Êúà",
  recommendations: {
    low: "ÂæàÂ•ΩÔºÅÊÇ®ÁöÑÁ¢≥Ë∂≥ËøπÂæà‰Ωé„ÄÇËØ∑ÁªßÁª≠‰øùÊåÅÔºåÂπ∂ËÄÉËôë‰ΩøÁî®ËäÇËÉΩËÆæÂ§á„ÄÇ",
    moderate: "Á¢≥Ë∂≥Ëøπ‰∏≠Á≠â„ÄÇË¶ÅÂáèÂ∞ëÂÆÉÔºåËØ∑Â∞ëÂêÉËÇâÁ±ªÔºåÂ§ö‰ΩøÁî®ÂÖ¨ÂÖ±‰∫§ÈÄö„ÄÇ",
    high: "Á¢≥Ë∂≥ËøπËæÉÈ´ò„ÄÇÂª∫ËÆÆÂáèÂ∞ëÂºÄËΩ¶Ôºå‰ΩøÁî®ÂèØÂÜçÁîüËÉΩÊ∫êÂíåÂèØÈáçÂ§ç‰ΩøÁî®ÁöÑÂåÖË£Ö„ÄÇ",
    veryHigh: "Á¢≥Ë∂≥ËøπÈùûÂ∏∏È´òÔºÅËØ∑Á´ãÂç≥ÈááÂèñË°åÂä®ÔºöÈ™ëËá™Ë°åËΩ¶Êàñ‰ΩøÁî®ÁîµÂä®ËΩ¶ÔºåÂáèÂ∞ëËÇâÁ±ªÂíåÁîµÂäõÊ∂àËÄó„ÄÇ"
  },
  fuelOptions: [
    { value: 'petrol', label: 'Ê±ΩÊ≤π' },
    { value: 'diesel', label: 'Êü¥Ê≤π' },
    { value: 'electric', label: 'ÁîµÂä®' }
  ]
}

    };
    // UI Refresh
    let currentLang = localStorage.getItem('preferredLang') || 'ru';
    const langSel = document.getElementById('language'); langSel.value = currentLang;
    function refreshUI() {
      const t = translations[currentLang];
      document.getElementById('title').textContent = t.title;
      ['electricity','meat','plastic','transport'].forEach(id => {
        const val = document.getElementById(id).value;
        document.getElementById('label-'+id).textContent = t[id] + ' ' + val;
      });
      document.getElementById('label-fuel').textContent = t.fuel;
      const fuelSel = document.getElementById('fuel'); fuelSel.innerHTML = '';
      t.fuelOptions.forEach(o => fuelSel.add(new Option(o.label,o.value)));
      document.getElementById('submit-btn').textContent = t.button;
      localStorage.setItem('preferredLang', currentLang);
    }
    langSel.addEventListener('change', () => { currentLang = langSel.value; refreshUI(); });
    // Sliders
    ['electricity','meat','plastic','transport'].forEach(id => {
      document.getElementById(id).addEventListener('input', () => {
        const t = translations[currentLang];
        document.getElementById('label-'+id).textContent = t[id] + ' ' + document.getElementById(id).value;
      });
    });
    // Calculate
    document.getElementById('submit-btn').addEventListener('click', async () => {
      const t = translations[currentLang];
      const data = {
  electricity:   +document.getElementById('electricity').value,
  meat:          +document.getElementById('meat').value,
  plastic:       +document.getElementById('plastic').value,
  transport_km:  +document.getElementById('transport').value,
  fuel_type:      document.getElementById('fuel').value,
  language:       document.getElementById('language').value 
      };
      const res = await fetch('http://localhost:8000/calculate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
      const json = await res.json();
      document.getElementById('output').textContent = `${t.result} ${json.index} ${t.unit}`;
      const idx=json.index, r=t.recommendations;
      const rec= idx<500? r.low: idx<1000? r.moderate: idx<2000? r.high: r.veryHigh;
      document.getElementById('recommendation').textContent = rec;
    });
    // Init
    refreshUI();
  });
  </script>
</body>
</html>
